<div class="advice-pause-manager-designer">
    <!-- Header Section -->
    <div class="designer-header" data-bind="click: toggleExpanded">
        <div class="header-content">
            <i class="fa fa-pause-circle designer-icon"></i>
            <span class="designer-title">Advice Pause Manager</span>
            <span class="configuration-summary" data-bind="text: getConfigurationSummary"></span>
            <div class="header-actions">
                <button type="button" class="btn btn-link btn-sm info-button" 
                        data-bind="click: showInfo" 
                        title="Show detailed information about this workflow action">
                    <i class="fa fa-info-circle text-info"></i>
                </button>
                <i class="fa toggle-icon" data-bind="css: { 'fa-chevron-down': !isExpanded(), 'fa-chevron-up': isExpanded() }"></i>
            </div>
        </div>
    </div>
    
    <!-- Configuration Content -->
    <div class="designer-content" data-bind="visible: isExpanded">
        
        <!-- Validation Message -->
        <!-- ko if: validationMessage() -->
        <div class="alert alert-warning">
            <i class="fa fa-exclamation-triangle"></i>
            <span data-bind="text: validationMessage"></span>
        </div>
        <!-- /ko -->
        
        <!-- Core Configuration Section -->
        <div class="configuration-section">
            <h4 class="section-title">
                <i class="fa fa-cogs"></i>
                Core Configuration
            </h4>
            
            <div class="form-row">
                <div class="col-md-6">
                    <label for="abstractAdviceType">Abstract Advice Type <span class="required">*</span></label>
                    <!-- ko if: viewModel && viewModel.config && viewModel.config.abstractAdviceTypeSystemName -->
                    <input type="text" 
                           class="form-control" 
                           id="abstractAdviceType"
                           placeholder="e.g., AbstractAdvice"
                           data-bind="textInput: viewModel.config.abstractAdviceTypeSystemName"
                           title="System name of the base advice type that all advice inherits from" />
                    <!-- /ko -->
                    <small class="form-text text-muted">Base type that all advice types inherit from</small>
                </div>
                <div class="col-md-6">
                    <label for="pausedPhase">Paused Phase <span class="required">*</span></label>
                    <!-- ko if: viewModel && viewModel.config && viewModel.config.pausedPhase -->
                    <input type="text" 
                           class="form-control" 
                           id="pausedPhase"
                           placeholder="e.g., Removed, Paused"
                           data-bind="textInput: viewModel.config.pausedPhase"
                           title="Phase name to move advice items to when pausing" />
                    <!-- /ko -->
                    <small class="form-text text-muted">Phase to move advice to when pausing</small>
                </div>
            </div>
            
            <div class="form-row">
                <div class="col-md-12">
                    <label for="pauseReason">Pause Reason</label>
                    <!-- ko if: viewModel && viewModel.config && viewModel.config.pauseReason -->
                    <input type="text" 
                           class="form-control" 
                           id="pauseReason"
                           placeholder="e.g., Advice paused by workflow"
                           data-bind="textInput: viewModel.config.pauseReason"
                           title="Reason text recorded when pausing advice" />
                    <!-- /ko -->
                    <small class="form-text text-muted">Reason recorded for audit trail and user communication</small>
                </div>
            </div>
        </div>
        
        <!-- Options Section -->
        <div class="configuration-section">
            <h4 class="section-title">
                <i class="fa fa-sliders"></i>
                Options
            </h4>
            
            <div class="form-row">
                <div class="col-md-6">
                    <label class="checkbox-label">
                        <!-- ko if: viewModel && viewModel.config && viewModel.config.saveAdviceState -->
                        <input type="checkbox" data-bind="checked: viewModel.config.saveAdviceState" />
                        <!-- /ko -->
                        Save Advice State
                    </label>
                    <small class="form-text text-muted">Save complete advice information for later restoration</small>
                </div>
                <div class="col-md-6">
                    <label class="checkbox-label">
                        <!-- ko if: viewModel && viewModel.config && viewModel.config.enableLogging -->
                        <input type="checkbox" data-bind="checked: viewModel.config.enableLogging" />
                        <!-- /ko -->
                        Enable Detailed Logging
                    </label>
                    <small class="form-text text-muted">Log comprehensive execution information for debugging</small>
                </div>
            </div>
        </div>
        
        <!-- Advanced Options -->
        <div class="configuration-section">
            <h4 class="section-title" data-bind="click: toggleAdvancedOptions" style="cursor: pointer;">
                <i class="fa" data-bind="css: { 'fa-chevron-right': !showAdvancedOptions(), 'fa-chevron-down': showAdvancedOptions() }"></i>
                Advanced Options
            </h4>
            
            <div data-bind="visible: showAdvancedOptions">
                <div class="form-row">
                    <div class="col-md-6">
                        <label for="timeout">Timeout (milliseconds)</label>
                        <!-- ko if: viewModel && viewModel.config && viewModel.config.timeout -->
                        <input type="number" 
                               class="form-control" 
                               id="timeout"
                               min="5000"
                               max="300000"
                               step="1000"
                               data-bind="textInput: viewModel.config.timeout"
                               title="Maximum execution time before timeout" />
                        <!-- /ko -->
                        <small class="form-text text-muted">Maximum execution time (5 seconds to 5 minutes)</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Information Panel -->
        <div class="info-panel">
            <div class="info-item">
                <i class="fa fa-info-circle text-info"></i>
                <div>
                    <strong>How it works:</strong> 
                    This action discovers all advice items inheriting from the specified abstract type, 
                    optionally saves their complete state, and moves them to the paused phase.
                </div>
            </div>
            <div class="info-item">
                <i class="fa fa-lightbulb-o text-warning"></i>
                <div>
                    <strong>Tip:</strong> 
                    Use "Save Advice State" when you plan to restore the advice later. 
                    Disable it for permanent removal scenarios.
                </div>
            </div>
            <div class="info-item">
                <i class="fa fa-question-circle text-primary"></i>
                <div>
                    <strong>Need help?</strong> 
                    Click the info icon (i) in the header for comprehensive documentation, 
                    examples, and troubleshooting guides.
                </div>
            </div>
        </div>
    </div>
    
    <!-- Information Modal -->
    <!-- ko if: infoModal -->
    <!-- ko with: infoModal -->
    <div class="modal workflow-action-info-modal" data-bind="visible: isVisible, event: { keypress: handleKeyPress }" style="display: none;" tabindex="-1">
        <div class="modal-backdrop" data-bind="click: hide"></div>
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title-section">
                        <i class="fa fa-info-circle text-info modal-icon"></i>
                        <h4 class="modal-title" data-bind="text: actionInfo.name || 'Workflow Action Information'"></h4>
                        <span class="badge badge-primary" data-bind="text: actionInfo.category || 'Workflow'"></span>
                    </div>
                    <button type="button" class="close" data-bind="click: hide" title="Close Information">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-nav">
                    <ul class="nav nav-tabs" role="tablist">
                        <!-- ko foreach: availableTabs -->
                        <li class="nav-item">
                            <a class="nav-link" 
                               data-bind="css: { active: $parent.currentTab() === id }, click: function() { $parent.switchTab(id); }"
                               href="#" role="tab">
                                <i class="fa" data-bind="css: icon"></i>
                                <span data-bind="text: title"></span>
                            </a>
                        </li>
                        <!-- /ko -->
                    </ul>
                </div>
                <div class="modal-body">
                    <div class="tab-content" data-bind="visible: currentTab() === 'overview'">
                        <div class="info-section">
                            <h5><i class="fa fa-info-circle"></i> Description</h5>
                            <p data-bind="text: actionInfo.description || 'No description available.'"></p>
                            
                            <!-- ko if: actionInfo.purpose -->
                            <h5><i class="fa fa-target"></i> Purpose</h5>
                            <p data-bind="text: actionInfo.purpose"></p>
                            <!-- /ko -->
                            
                            <!-- ko if: actionInfo.useCases && actionInfo.useCases.length > 0 -->
                            <h5><i class="fa fa-lightbulb-o"></i> Use Cases</h5>
                            <ul class="use-cases-list">
                                <!-- ko foreach: actionInfo.useCases -->
                                <li data-bind="text: $data"></li>
                                <!-- /ko -->
                            </ul>
                            <!-- /ko -->
                        </div>
                    </div>
                    
                    <div class="tab-content" data-bind="visible: currentTab() === 'configuration'">
                        <!-- ko if: getConfigurationParameters().length > 0 -->
                        <div class="info-section">
                            <h5><i class="fa fa-cogs"></i> Configuration Parameters</h5>
                            <div class="table-responsive">
                                <table class="table table-striped table-sm">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Type</th>
                                            <th>Required</th>
                                            <th>Default</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: getConfigurationParameters">
                                        <tr>
                                            <td><code data-bind="text: name"></code></td>
                                            <td><span class="badge badge-secondary" data-bind="text: type"></span></td>
                                            <td>
                                                <i class="fa" data-bind="css: { 'fa-check text-success': required, 'fa-times text-muted': !required }"></i>
                                            </td>
                                            <td><code data-bind="text: default"></code></td>
                                            <td data-bind="text: description"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>
                    
                    <div class="tab-content" data-bind="visible: currentTab() === 'examples'">
                        <!-- ko if: getUsageExamples().length > 0 -->
                        <!-- ko foreach: getUsageExamples -->
                        <div class="example-section">
                            <h5>
                                <i class="fa fa-code"></i>
                                <span data-bind="text: title"></span>
                            </h5>
                            <p><strong>Scenario:</strong> <span data-bind="text: scenario"></span></p>
                            <div class="code-example">
                                <div class="code-header">
                                    <span>Configuration</span>
                                </div>
                                <pre><code data-bind="text: JSON.stringify(configuration, null, 2)"></code></pre>
                            </div>
                            <p><strong>Expected Result:</strong> <span data-bind="text: expected"></span></p>
                        </div>
                        <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    
                    <div class="tab-content" data-bind="visible: currentTab() === 'debugging'">
                        <div class="info-section">
                            <h5><i class="fa fa-bug"></i> Debugging Information</h5>
                            <div class="debug-tools">
                                <h6>Debug URL</h6>
                                <p>Use this URL to enable detailed logging:</p>
                                <div class="input-group">
                                    <input type="text" class="form-control" readonly data-bind="value: getDebugUrl">
                                    <div class="input-group-append">
                                        <button type="button" class="btn btn-outline-secondary" 
                                                data-bind="click: function() { copyToClipboard(getDebugUrl()); }"
                                                title="Copy debug URL">
                                            <i class="fa fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" data-bind="visible: currentTab() === 'troubleshooting'">
                        <!-- ko if: getTroubleshootingScenarios().length > 0 -->
                        <!-- ko foreach: getTroubleshootingScenarios -->
                        <div class="troubleshooting-scenario">
                            <h5>
                                <i class="fa fa-exclamation-triangle text-warning"></i>
                                <span data-bind="text: problem"></span>
                            </h5>
                            <!-- ko if: symptoms.length > 0 -->
                            <div class="scenario-section">
                                <h6><i class="fa fa-eye"></i> Symptoms</h6>
                                <ul data-bind="foreach: symptoms">
                                    <li data-bind="text: $data"></li>
                                </ul>
                            </div>
                            <!-- /ko -->
                            <!-- ko if: solutions.length > 0 -->
                            <div class="scenario-section">
                                <h6><i class="fa fa-wrench"></i> Solutions</h6>
                                <ol data-bind="foreach: solutions">
                                    <li data-bind="text: $data"></li>
                                </ol>
                            </div>
                            <!-- /ko -->
                        </div>
                        <!-- /ko -->
                        <!-- /ko -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bind="click: hide">
                        <i class="fa fa-times"></i> Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- /ko -->
    <!-- /ko -->
</div>